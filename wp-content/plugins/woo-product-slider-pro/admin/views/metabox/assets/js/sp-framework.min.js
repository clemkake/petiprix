!function($,window,document,undefined){"use strict";$.SPFRAMEWORK=$.SPFRAMEWORK||{};var $sp_body=$("body"),sp_is_rtl=$sp_body.hasClass("rtl"),select_value_layout,select_slider_type;$.fn.SPFRAMEWORK_TAB_NAVIGATION=function(){return this.each(function(){var $this=$(this),$nav=$this.find(".sp-nav"),$reset=$this.find(".sp-reset"),$expand=$this.find(".sp-expand-all");$nav.find("ul:first a").on("click",function(e){e.preventDefault();var $el=$(this),$next=$el.next(),$target=$el.data("section");$next.is("ul")?($next.slideToggle("fast"),$el.closest("li").toggleClass("sp-tab-active")):($("#sp-tab-"+$target).fadeIn("fast").siblings().hide(),$nav.find("a").removeClass("sp-section-active"),$el.addClass("sp-section-active"),$reset.val($target))}),$expand.on("click",function(e){e.preventDefault(),$this.find(".sp-body").toggleClass("sp-show-all"),$(this).find(".fa").toggleClass("fa-eye-slash").toggleClass("fa-eye")})})},$.SPFRAMEWORK.DEPENDENCY=function(el,param){var base=this;base.$el=$(el),base.el=el,base.init=function(){base.ruleset=$.deps.createRuleset();var cfg={show:function(el){el.removeClass("hidden")},hide:function(el){el.addClass("hidden")},log:!1,checkTargets:!1};void 0!==param?base.depSub():base.depRoot(),$.deps.enable(base.$el,base.ruleset,cfg)},base.depRoot=function(){base.$el.each(function(){$(this).find("[data-controller]").each(function(){var $this=$(this),_controller=$this.data("controller").split("|"),_condition=$this.data("condition").split("|"),_value=$this.data("value").toString().split("|"),_rules=base.ruleset;$.each(_controller,function(index,element){var value=_value[index]||"",condition=_condition[index]||_condition[0];(_rules=_rules.createRule('[data-depend-id="'+element+'"]',condition,value)).include($this)})})})},base.depSub=function(){base.$el.each(function(){$(this).find("[data-sub-controller]").each(function(){var $this=$(this),_controller=$this.data("sub-controller").split("|"),_condition=$this.data("sub-condition").split("|"),_value=$this.data("sub-value").toString().split("|"),_rules=base.ruleset;$.each(_controller,function(index,element){var value=_value[index]||"",condition=_condition[index]||_condition[0];(_rules=_rules.createRule('[data-sub-depend-id="'+element+'"]',condition,value)).include($this)})})})},base.init()},$.fn.SPFRAMEWORK_DEPENDENCY=function(param){return this.each(function(){new $.SPFRAMEWORK.DEPENDENCY(this,param)})},$.fn.SPFRAMEWORK_CHOSEN=function(){return this.each(function(){$(this).chosen({allow_single_deselect:!0,disable_search_threshold:15,width:parseFloat($(this).actual("width")+25)+"px"})})},$.fn.SPFRAMEWORK_IMAGE_SELECTOR=function(){return this.each(function(){$(this).find("label").on("click",function(){$(this).siblings().find("input").prop("checked",!1)})})},$.fn.SPFRAMEWORK_UPLOADER=function(){return this.each(function(){var $this=$(this),$add=$this.find(".sp-add"),$input=$this.find("input"),wp_media_frame;$add.on("click",function(e){e.preventDefault(),"undefined"!=typeof wp&&wp.media&&wp.media.gallery&&(wp_media_frame?wp_media_frame.open():((wp_media_frame=wp.media({title:$add.data("frame-title"),library:{type:$add.data("upload-type")},button:{text:$add.data("insert-title")}})).on("select",function(){var attachment=wp_media_frame.state().get("selection").first();$input.val(attachment.attributes.url).trigger("change")}),wp_media_frame.open()))})})},$.fn.SPFRAMEWORK_GROUP=function(){return this.each(function(){var _this=$(this),field_groups=_this.find(".sp-groups"),accordion_group=_this.find(".sp-accordion"),clone_group=_this.find(".sp-group:first").clone();accordion_group.length&&accordion_group.accordion({header:".sp-group-title",collapsible:!0,active:!1,animate:250,heightStyle:"content",icons:{header:"dashicons dashicons-arrow-right",activeHeader:"dashicons dashicons-arrow-down"},beforeActivate:function(event,ui){$(ui.newPanel).SPFRAMEWORK_DEPENDENCY("sub")}}),field_groups.sortable({axis:"y",handle:".sp-group-title",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(event,ui){var inside=ui.item.children(".sp-group-content");"block"===inside.css("display")&&(inside.hide(),field_groups.sortable("refreshPositions"))},stop:function(event,ui){ui.item.children(".sp-group-title").triggerHandler("focusout"),accordion_group.accordion({active:!1})}});var i=0;$(".sp-add-group",_this).on("click",function(e){e.preventDefault(),clone_group.find("input, select, textarea").each(function(){this.name=this.name.replace(/\[(\d+)\]/,function(string,id){return"["+(parseInt(id,10)+1)+"]"})});var cloned=clone_group.clone().removeClass("hidden");field_groups.append(cloned),accordion_group.length&&(field_groups.accordion("refresh"),field_groups.accordion({active:cloned.index()})),field_groups.find("input, select, textarea").each(function(){this.name=this.name.replace("[_nonce]","")}),cloned.SPFRAMEWORK_DEPENDENCY("sub"),cloned.SPFRAMEWORK_RELOAD_PLUGINS(),i++}),field_groups.on("click",".sp-remove-group",function(e){e.preventDefault(),$(this).closest(".sp-group").remove()})})},$.fn.SPFRAMEWORK_CONFIRM=function(){return this.each(function(){$(this).on("click",function(e){confirm("Are you sure?")||e.preventDefault()})})},$.fn.SPFRAMEWORK_SAVE=function(){return this.each(function(){var $this=$(this),$text=$this.data("save"),$value=$this.val(),$ajax=$("#sp-save-ajax");$(document).on("keydown",function(event){(event.ctrlKey||event.metaKey)&&"s"===String.fromCharCode(event.which).toLowerCase()&&(event.preventDefault(),$this.trigger("click"))}),$this.on("click",function(e){if($ajax.length){"object"==typeof tinyMCE&&tinyMCE.triggerSave(),$this.prop("disabled",!0).attr("value",$text);var serializedOptions=$("#sp_wpsp_framework_form").serialize();$.post("options.php",serializedOptions).error(function(){alert("Error, Please try again.")}).success(function(){$this.prop("disabled",!1).attr("value",$value),$ajax.hide().fadeIn().delay(250).fadeOut()}),e.preventDefault()}else $this.addClass("disabled").attr("value",$text)})})},void 0!==$.widget&&void 0!==$.ui&&void 0!==$.ui.dialog&&$.widget("ui.dialog",$.ui.dialog,{_createOverlay:function(){this._super(),this.options.modal&&this._on(this.overlay,{click:"close"})}}),$.SPFRAMEWORK.ICONS_MANAGER=function(){var base=this,onload=!0,$parent;this.init=function(){$sp_body.on("click",".sp-icon-add",function(e){e.preventDefault();var $this=$(this),$dialog=$("#sp-icon-dialog"),$load=$dialog.find(".sp-dialog-load"),$select=$dialog.find(".sp-dialog-select"),$insert=$dialog.find(".sp-dialog-insert"),$search=$dialog.find(".sp-icon-search");$parent=$this.closest(".sp-icon-select"),$dialog.dialog({width:850,height:700,modal:!0,resizable:!1,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){$sp_body.addClass("sp-icon-scrolling"),$(".ui-dialog-titlebar-close").addClass("ui-button"),$(window).on("resize",function(){var height=$(window).height(),load_height=Math.floor(height-237),set_height=Math.floor(height-125);$dialog.dialog("option","height",set_height).parent().css("max-height",set_height),$dialog.css("overflow","auto"),$load.css("height",load_height)}).resize()},close:function(){$sp_body.removeClass("sp-icon-scrolling")}}),onload&&$.ajax({type:"POST",url:ajaxurl,data:{action:"sp-get-icons"},success:function(content){$load.html(content),onload=!1,$load.on("click","a",function(e){e.preventDefault();var icon=$(this).data("icon");$parent.find("i").removeAttr("class").addClass(icon),$parent.find("input").val(icon).trigger("change"),$parent.find(".sp-icon-preview").removeClass("hidden"),$parent.find(".sp-icon-remove").removeClass("hidden"),$dialog.dialog("close")}),$search.keyup(function(){var value=$(this).val(),$icons;$load.find("a").each(function(){var $ico=$(this);$ico.data("icon").search(new RegExp(value,"i"))<0?$ico.hide():$ico.show()})}),$load.find(".sp-icon-tooltip").sptooltip({html:!0,placement:"top",container:"body"})}})}),$sp_body.on("click",".sp-icon-remove",function(e){e.preventDefault();var $this=$(this),$parent=$this.closest(".sp-icon-select");$parent.find(".sp-icon-preview").addClass("hidden"),$parent.find("input").val("").trigger("change"),$this.addClass("hidden")})},this.init()},"function"==typeof Color&&(Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var hex=parseInt(this._color,10).toString(16);if(this.error)return"";if(hex.length<6)for(var i=6-hex.length-1;i>=0;i--)hex="0"+hex;return"#"+hex}),$.SPFRAMEWORK.PARSE_COLOR_VALUE=function(val){var value=val.replace(/\s+/g,""),alpha=-1!==value.indexOf("rgba")?parseFloat(100*value.replace(/^.*,(.+)\)/,"$1")):100,rgba;return{value:value,alpha:alpha,rgba:alpha<100}},$.fn.SPFRAMEWORK_COLORPICKER=function(){return this.each(function(){var $this=$(this);if(!1!==$this.data("rgba")){var picker=$.SPFRAMEWORK.PARSE_COLOR_VALUE($this.val());$this.wpColorPicker({clear:function(){$this.trigger("keyup")},change:function(event,ui){var ui_color_value=ui.color.toString();$this.closest(".wp-picker-container").find(".sp-alpha-slider-offset").css("background-color",ui_color_value),$this.val(ui_color_value).trigger("change")},create:function(){var a8cIris=$this.data("a8cIris"),$container=$this.closest(".wp-picker-container"),$alpha_wrap=$('<div class="sp-alpha-wrap"><div class="sp-alpha-slider"></div><div class="sp-alpha-slider-offset"></div><div class="sp-alpha-text"></div></div>').appendTo($container.find(".wp-picker-holder")),$alpha_slider=$alpha_wrap.find(".sp-alpha-slider"),$alpha_text=$alpha_wrap.find(".sp-alpha-text"),$alpha_offset=$alpha_wrap.find(".sp-alpha-slider-offset");$alpha_slider.slider({slide:function(event,ui){var slide_value=parseFloat(ui.value/100);a8cIris._color._alpha=slide_value,$this.wpColorPicker("color",a8cIris._color.toString()),$alpha_text.text(slide_value<1?slide_value:"")},create:function(){var slide_value=parseFloat(picker.alpha/100),alpha_text_value=slide_value<1?slide_value:"";$alpha_text.text(alpha_text_value),$alpha_offset.css("background-color",picker.value),$container.on("click",".wp-picker-clear",function(){a8cIris._color._alpha=1,$alpha_text.text(""),$alpha_slider.slider("option","value",100).trigger("slide")}),$container.on("click",".wp-picker-default",function(){var default_picker=$.SPFRAMEWORK.PARSE_COLOR_VALUE($this.data("default-color")),default_value=parseFloat(default_picker.alpha/100),default_text=default_value<1?default_value:"";a8cIris._color._alpha=default_value,$alpha_text.text(default_text),$alpha_slider.slider("option","value",default_picker.alpha).trigger("slide")}),$container.on("click",".wp-color-result",function(){$alpha_wrap.toggle()}),$sp_body.on("click.wpcolorpicker",function(){$alpha_wrap.hide()})},value:picker.alpha,step:1,min:1,max:100})}})}else $this.wpColorPicker({clear:function(){$this.trigger("keyup")},change:function(event,ui){$this.val(ui.color.toString()).trigger("change")}})})},jQuery(document).ready(function(){jQuery(".sp_wpsp_font_field").each(function(){let parentName=jQuery(this).attr("data-id"),preview=jQuery(this).find("#preview-"+parentName),fontColor=jQuery(this).find(".sp-field-color-picker"),fontSize=jQuery(this).find(".sp-font-size input"),lineHeight=jQuery(this).find(".sp-font-height input"),fontFamily=jQuery(this).find(".sp-typo-family"),fontWeight=jQuery(this).find(".sp-typo-variant"),textAlignment=jQuery(this).find(".sp-font-alignment select"),textTransform=jQuery(this).find(".sp-font-transform select"),letterSpacing=jQuery(this).find(".sp-font-spacing select"),typography_type=jQuery(this).find(".sp-typo-font");function updatePreview(preview,fontColor,fontSize,lineHeight,textAlignment,textTransform,letterSpacing){preview.css("color",fontColor.val()).css("font-size",fontSize.val()+"px").css("line-height",lineHeight.val()+"px").css("text-align",textAlignment.val()).css("text-transform",textTransform.val()).css("letter-spacing",letterSpacing.val())}function loadGoogleFont(element,parentName,fontFamily,fontWeight){let font=fontFamily.val(),fontWeightStyle=calculateFontWeight(fontWeight.find(":selected").text()),href="//fonts.googleapis.com/css?family="+font+":"+fontWeightStyle.fontWeightValue,html='<link href="'+href+'" class="sp-font-preview-'+parentName+'" rel="stylesheet" type="text/css" />';jQuery(".sp-font-preview-"+parentName).length>0?jQuery(".sp-font-preview-"+parentName).attr("href",href).load():jQuery("head").append(html).load(),preview.css("font-family",font).css("font-weight",fontWeightStyle.fontWeightValue).css("font-style",fontWeightStyle.fontStyleValue)}function calculateFontWeight(fontWeight){let fontWeightValue="400",fontStyleValue="normal";switch(fontWeight){case"100":fontWeightValue="100";break;case"100italic":fontWeightValue="100",fontStyleValue="italic";break;case"200":fontWeightValue="200";break;case"200italic":fontWeightValue="200",fontStyleValue="italic";break;case"300":fontWeightValue="300";break;case"300italic":fontWeightValue="300",fontStyleValue="italic";break;case"500":fontWeightValue="500";break;case"500italic":fontWeightValue="500",fontStyleValue="italic";break;case"600":fontWeightValue="600";break;case"600italic":fontWeightValue="600",fontStyleValue="italic";break;case"700":fontWeightValue="700";break;case"700italic":fontWeightValue="700",fontStyleValue="italic";break;case"800":fontWeightValue="800";break;case"800italic":fontWeightValue="800",fontStyleValue="italic";break;case"900":fontWeightValue="900";break;case"900italic":fontWeightValue="900",fontStyleValue="italic";break;case"italic":fontStyleValue="italic"}return{fontWeightValue:fontWeightValue,fontStyleValue:fontStyleValue}}updatePreview(preview,fontColor,fontSize,lineHeight,textAlignment,textTransform,letterSpacing),loadGoogleFont(this,parentName,fontFamily,fontWeight),fontFamily.on("change",function(){var _this=$(this),_type=_this.find(":selected").data("type")||"custom",_variants=_this.find(":selected").data("variants");fontWeight.length&&(fontWeight.find("option").remove(),$.each(_variants.split("|"),function(key,text){fontWeight.append('<option value="'+text+'">'+text+"</option>")}),fontWeight.find('option[value="regular"]').attr("selected","selected").trigger("chosen:updated")),typography_type.val(_type)}),jQuery(fontFamily).add(fontWeight).change(function(){loadGoogleFont(this,parentName,fontFamily,fontWeight)}),preview.add(fontColor).add(fontSize).add(lineHeight).add(textAlignment).add(textTransform).add(letterSpacing).change(function(){updatePreview(preview,fontColor,fontSize,lineHeight,textAlignment,textTransform,letterSpacing)})})}),$.SPFRAMEWORK.WIDGET_RELOAD_PLUGINS=function(){$(document).on("widget-added widget-updated",function(event,$widget){$widget.SPFRAMEWORK_RELOAD_PLUGINS(),$widget.SPFRAMEWORK_DEPENDENCY()})},$.fn.SPFRAMEWORK_TOOLTIP=function(){return this.each(function(){var placement=sp_is_rtl?"right":"left";$(this).sptooltip({html:!0,placement:placement,container:"body"})})},$.fn.SPFRAMEWORK_FIELD_MEDIA=function(){return this.each(function(){var $this=$(this),$upload_button=$this.find(".sp--button"),$remove_button=$this.find(".sp--remove"),$library=$upload_button.data("library")&&$upload_button.data("library").split(",")||"",wp_media_frame;$upload_button.on("click",function(e){e.preventDefault(),void 0!==window.wp&&window.wp.media&&window.wp.media.gallery&&(wp_media_frame?wp_media_frame.open():((wp_media_frame=window.wp.media({library:{type:$library}})).on("select",function(){var thumbnail,attributes=wp_media_frame.state().get("selection").first().attributes,preview_size=$upload_button.data("preview-size")||"thumbnail";$this.find(".sp--url").val(attributes.url),$this.find(".sp--id").val(attributes.id),$this.find(".sp--width").val(attributes.width),$this.find(".sp--height").val(attributes.height),$this.find(".sp--alt").val(attributes.alt),$this.find(".sp--title").val(attributes.title),$this.find(".sp--description").val(attributes.description),thumbnail=void 0!==attributes.sizes&&void 0!==attributes.sizes.thumbnail&&"thumbnail"===preview_size?attributes.sizes.thumbnail.url:void 0!==attributes.sizes&&void 0!==attributes.sizes.full?attributes.sizes.full.url:attributes.icon,$remove_button.removeClass("hidden"),$this.find(".sp--image-preview").removeClass("hidden"),$this.find(".sp--src").attr("src",thumbnail),$this.find(".sp--thumbnail").val(thumbnail).trigger("change")}),wp_media_frame.open()))}),$remove_button.on("click",function(e){e.preventDefault(),$remove_button.addClass("hidden"),$this.find(".sp--image-preview").addClass("hidden"),$this.find("input").val(""),$this.find(".sp--thumbnail").trigger("change")})})},$.fn.SPFRAMEWORK_RELOAD_PLUGINS=function(){return this.each(function(){$(".chosen",this).SPFRAMEWORK_CHOSEN(),$(".sp-field-image-select",this).SPFRAMEWORK_IMAGE_SELECTOR(),$(".sp-field-media",this).SPFRAMEWORK_FIELD_MEDIA(),$(".sp-field-upload",this).SPFRAMEWORK_UPLOADER(),$(".sp-field-color-picker",this).SPFRAMEWORK_COLORPICKER(),$(".sp-help",this).SPFRAMEWORK_TOOLTIP()})},$(document).ready(function(){$(".sp-wpsp-framework").SPFRAMEWORK_TAB_NAVIGATION(),$(".sp-reset-confirm, .sp-import-backup").SPFRAMEWORK_CONFIRM(),$(".sp-content, .wp-customizer, .widget-content, .sp-taxonomy").SPFRAMEWORK_DEPENDENCY(),$(".sp-field-group").SPFRAMEWORK_GROUP(),$(".sp-save").SPFRAMEWORK_SAVE(),$sp_body.SPFRAMEWORK_RELOAD_PLUGINS(),$.SPFRAMEWORK.ICONS_MANAGER(),$.SPFRAMEWORK.WIDGET_RELOAD_PLUGINS()}),$("#sp_product_attribute").change(function(event){event.preventDefault();var data={action:"sp_wpsp_attribute_term",product_attribute:$(this).val()};$.post(ajaxurl,data,function(resp){$("#sp_product_attribute_terms").html(resp),$("#sp_product_attribute_terms").trigger("chosen:updated")})}),"slider"==$(".sp-field-layout_preset .sp-field-image-select label").find("input:checked").val()?$(".sp-metabox-framework .sp-nav li a.sp_wpsp_shortcode_option_2").show():$(".sp-metabox-framework .sp-nav li a.sp_wpsp_shortcode_option_2").hide(),"product_carousel"==$(".sp-field-button_set .sp-field-button-set label").find("input:checked").val()?$(".sp-metabox-framework .sp-nav li a.sp_wpsp_shortcode_option_4").show():$(".sp-metabox-framework .sp-nav li a.sp_wpsp_shortcode_option_4").hide()}(jQuery,window,document),$(document).on("click",".sp-field-layout_preset .sp-field-image-select label",function(event){var select_value;event.stopPropagation(),"slider"==$(this).find("input:checked").val()?$(".sp-metabox-framework .sp-nav li a.sp_wpsp_shortcode_option_2").show():$(".sp-metabox-framework .sp-nav li a.sp_wpsp_shortcode_option_2").hide()}),$(document).on("click",".sp-field-button_set .sp-field-button-set label",function(event){var select_value;event.stopPropagation(),"product_carousel"==$(this).find("input:checked").val()?$(".sp-metabox-framework .sp-nav li a.sp_wpsp_shortcode_option_4").show():$(".sp-metabox-framework .sp-nav li a.sp_wpsp_shortcode_option_4").hide()});